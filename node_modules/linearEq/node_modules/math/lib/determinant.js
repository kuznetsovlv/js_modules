(function () {
	"use strict";
	function determinant (matrix) {
		var size = matrix.length,
		    m = [],
		    result = 0;
		if (!size || !(matrix instanceof Array)) {
			if (require('utils').isNumeric(matrix))
				return +matrix;
			else
				throw 'Incorrect matrix';
		}
		if (size === 1)
			return determinant(matrix[0]);
		for (var i = 0; i < size; ++i)
			if (matrix[i].length !== size)
				throw 'Incorrect matrix';
		for (var i = 0; i < size; ++i) {
			var row = [];
			for (var j = 1; j < size; ++j) {
				for (var k = 0; k < size; ++k) {
					if (k === i)
						continue;
					row.push(matrix[j][k]);
				}
				m.push(row);
				row = [];
			}
			result += Math.pow(-1, i) * matrix[0][i] * determinant(m);
			m = [];
		}
		return result;
	}
	module.exports = determinant;
})()